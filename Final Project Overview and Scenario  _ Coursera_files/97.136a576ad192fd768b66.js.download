(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{"/LCp":function(module,exports,e){},EAIP:function(module,exports,e){var n=e("/LCp"),t;"string"==typeof n&&(n=[[module.i,n,""]]);var r={transform:void 0},a=e("aET+")(n,r);n.locals&&(module.exports=n.locals)},"jq+c":function(module,e,n){"use strict";n.r(e);var t=n("VbXa"),r=n.n(t),a=n("q1tI"),s=n.n(a),o=n("S+eF"),i=n.n(o),c=n("DnuM"),u=n("sQ/U"),l=n("hs7e"),d=n("welz"),m=n.n(d),h=n("pWop"),p,f=m.a.Collection.extend({model:h.a,getEnrolled:function getEnrolled(){return this.filter((function(e){return e.get("courseRole")!==h.a.NOT_ENROLLED}))}}),v=n("fw5G"),g=n.n(v),C=n("TKYU"),membershipsData=function(e){var n=(new g.a).addQueryParam("q","findByUser").addQueryParam("userId",e);return i()(C.a.get(n.toString()))},promises_memberships=function(e){var n=membershipsData(e).then((function(e){return new f(e.elements)}));return n.done(),n},E=n("rIRb"),b=Object(c.a)("/api/reports.v1",{type:"rest"}),y="teachVisitedAt",L=10080,w={getBannerData:function getBannerData(){var e=this;return this.getTeachingCourse().spread((function(n,t){return[n,t,e.getLearnerCounts(n,t)]}))},getVisitedTimestamp:function getVisitedTimestamp(){return localStorage.teachVisitedAt},setVisitedTimestamp:function setVisitedTimestamp(){localStorage.teachVisitedAt=Date.now()},shouldShow:function shouldShow(){var e=this.getVisitedTimestamp();if(e){var n=new Date(parseInt(e)),t=new Date(Date.now()),r,a,s;return 60*t.getHours()+t.getMinutes()-(60*n.getHours()+n.getMinutes())>10080}return!0},getTeachingCourse:function getTeachingCourse(){var e=u.a.get().id;if(!e)return i.a.reject();return promises_memberships(e).then((function(e){var n=e.find((function(e){return e.hasTeachingRole()}));if(n&&"UNIVERSITY_ADMIN"!==n.get("courseRole")){var t=n.get("courseId");return[n,l.a.fromId(t)]}return i.a.reject()})).spread((function(e,n){return E.a.isLaunched(n)?[e,n]:i.a.reject()}))},getLearnerCounts:function getLearnerCounts(e,n){var t=this;return i()(b.get("Course~".concat(n.id,"~activity_learner_counts"))).then((function(r){return t.validateLearnerCountsResponse(r)?r.elements[0].body:i.a.reject({membership:e,course:n})}))},validateLearnerCountsResponse:function validateLearnerCountsResponse(e){return e.elements&&e.elements[0]&&e.elements[0].body&&e.elements[0].body.latest&&e.elements[0].body.latest.starter_ever_count&&e.elements[0].body.latest.active_learner_past_1w_count&&e.elements[0].body.latest.visitor_ever_count&&e.elements[0].body["1w_ago"]&&e.elements[0].body["1w_ago"].starter_ever_count},getWeeklyNewLearnerCount:function getWeeklyNewLearnerCount(e){return e.latest.starter_ever_count-e["1w_ago"].starter_ever_count},getWeeklyActiveLearnerCount:function getWeeklyActiveLearnerCount(e){return e.latest.active_learner_past_1w_count},getTotalLearnerCount:function getTotalLearnerCount(e){return e.latest.visitor_ever_count}},T=w,k=w.getBannerData,B=w.getVisitedTimestamp,A=w.setVisitedTimestamp,N=w.shouldShow,P=w.getTeachingCourse,R=w.getLearnerCounts,D=w.validateLearnerCountsResponse,W=w.getWeeklyNewLearnerCount,V=w.getWeeklyActiveLearnerCount,I=w.getTotalLearnerCount,j=n("EAIP"),S=n("17x9"),M=n.n(S),q=n("kvW3"),x,O=function(e){function TotalLearnerBanner(){return e.apply(this,arguments)||this}var n;return r()(TotalLearnerBanner,e),TotalLearnerBanner.prototype.render=function render(){var e=this.props.course,n=e.name,t="/teach/".concat(e.slug),r=T.getTotalLearnerCount(this.props.learnerCounts);return s.a.createElement("div",{className:"rc-TotalLearnerBanner"},"A total of"," ",s.a.createElement("a",{href:t},s.a.createElement("strong",{className:"c-teach-banner-learner-count"},s.a.createElement(q.c,{value:r})," learners"))," ","are enrolled in ",s.a.createElement("span",{className:"c-teach-banner-course-name"},n),". View more on the"," ",s.a.createElement("a",{href:t},x||(x=s.a.createElement("strong",null,"Course Dashboard."))))},TotalLearnerBanner}(s.a.Component);O.propTypes={course:M.a.object.isRequired,learnerCounts:M.a.object.isRequired};var U=O,F,J=function(e){function WeeklyActiveLearnerBanner(){return e.apply(this,arguments)||this}var n;return r()(WeeklyActiveLearnerBanner,e),WeeklyActiveLearnerBanner.prototype.render=function render(){var e=this.props.course,n=e.name,t="/teach/".concat(e.slug),r=T.getWeeklyActiveLearnerCount(this.props.learnerCounts);return s.a.createElement("div",{className:"rc-WeeklyActiveLearnerBanner"},s.a.createElement("a",{href:t},s.a.createElement("strong",{className:"c-teach-banner-learner-count"},s.a.createElement(q.c,{value:r})," learners"))," ","were active in ",s.a.createElement("span",{className:"c-teach-banner-course-name"},n)," in the past week. View more on the"," ",s.a.createElement("a",{href:t},F||(F=s.a.createElement("strong",null,"Course Dashboard."))))},WeeklyActiveLearnerBanner}(s.a.Component);J.propTypes={course:M.a.object.isRequired,learnerCounts:M.a.object.isRequired};var H=J,Q,Y=function(e){function WeeklyNewLearnerBanner(){return e.apply(this,arguments)||this}var n;return r()(WeeklyNewLearnerBanner,e),WeeklyNewLearnerBanner.prototype.render=function render(){var e=this.props.course,n=e.name,t="/teach/".concat(e.slug),r=T.getWeeklyNewLearnerCount(this.props.learnerCounts);return s.a.createElement("div",{className:"rc-WeeklyNewLearnerBanner"},s.a.createElement("a",{href:t},s.a.createElement("strong",{className:"c-teach-banner-learner-count"},s.a.createElement(q.c,{value:r})," learners"))," ","enrolled in ",s.a.createElement("span",{className:"c-teach-banner-course-name"},n)," in the past week. View more on the"," ",s.a.createElement("a",{href:t},Q||(Q=s.a.createElement("strong",null,"Course Dashboard."))))},WeeklyNewLearnerBanner}(s.a.Component);Y.propTypes={course:M.a.object.isRequired,learnerCounts:M.a.object.isRequired};var z,G,K,X=[{key:"weeklyActiveLearner",component:H},{key:"weeklyNewLearner",component:Y},{key:"totalLearner",component:U}],Z=function(e){function TeachBanner(){for(var n,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return(n=e.call.apply(e,[this].concat(r))||this).state={course:null,membership:null,learnerCounts:{},bannerIndex:-1,dismissed:!1},n.handleDismiss=function(){T.setVisitedTimestamp(),n.setState({dismissed:!0})},n}r()(TeachBanner,e);var n=TeachBanner.prototype;return n.componentDidMount=function componentDidMount(){var e=this;T.getBannerData().spread((function(n,t,r){var a=Math.round(Math.random()*(X.length-1));e.setState({course:t,membership:n,learnerCounts:r,bannerIndex:a})})).catch((function(){})).done()},n.renderBanner=function renderBanner(){var e=X[this.state.bannerIndex].component;return(s.a.createElement(e,{course:this.state.course,learnerCounts:this.state.learnerCounts}))},n.render=function render(){if(!this.state.course||this.state.dismissed||!T.shouldShow())return G||(G=s.a.createElement("div",null));return(s.a.createElement("div",{className:"rc-TeachBanner bt3-alert bt3-alert-info bt3-alert-dismissable"},s.a.createElement("div",{className:"c-teach-banner-content"},s.a.createElement("button",{onClick:this.handleDismiss,className:"bt3-close","data-dismiss":"alert","aria-label":"Close"},K||(K=s.a.createElement("span",{"aria-hidden":"true"},"Ã—"))),this.renderBanner())))},TeachBanner}(s.a.Component),ee=e.default=Z},rIRb:function(module,e,n){"use strict";n.d(e,"b",(function(){return m}));var t=n("/WoZ"),r=n("M6Ur"),a=n("tEn/"),s={isLaunched:function isLaunched(e){return!!e.launchedAt&&e.launchedAt<=Date.now()},isPreEnrollmentEnabled:function isPreEnrollmentEnabled(e){return!this.isLaunched(e)&&"preEnrollmentEnabledAt"in e},isSessionsModeEnabled:function isSessionsModeEnabled(e){return void 0!==e.sessionsEnabledAt&&e.sessionsEnabledAt<=Date.now()},isVerificationEnabled:function isVerificationEnabled(e){return!!e.verificationEnabledAt&&e.verificationEnabledAt<=Date.now()},isPrivate:function isPrivate(e){return Object(r.g)(e)},isFullC4CPartner:function isFullC4CPartner(e){var n=e.isC4CPartner,t=e.isPrivateAuthoringPartner;return n&&!t},getCourseCatalogType:function getCourseCatalogType(e){var n=t.a.PUBLIC;return s.isPrivate(e)?n=t.a.PRIVATE:e.isLimitedToEnterprise&&(n=t.a.ENTERPRISE),n},isProject:function isProject(e){return[a.a.PROJECT,a.a.RHYME_PROJECT].includes(e)}};e.a=s;var o=s.isLaunched,i=s.isPreEnrollmentEnabled,c=s.isSessionsModeEnabled,u=s.isVerificationEnabled,l=s.isPrivate,d=s.isFullC4CPartner,m=s.getCourseCatalogType,h=s.isProject}}]);
//# sourceMappingURL=97.136a576ad192fd768b66.js.map